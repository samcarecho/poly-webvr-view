(function(c){if("object"===typeof exports&&"undefined"!==typeof module)module.exports=c();else if("function"===typeof define&&define.amd)define([],c);else{var d;d="undefined"===typeof window?"undefined"===typeof global?"undefined"===typeof self?this:self:global:window,d.VRView=c()}})(function(){return function m(p,q,v){function w(B,C){if(!q[B]){if(!p[B]){var D="function"==typeof require&&require;if(!C&&D)return D(B,!0);if(z)return z(B,!0);var E=new Error("Cannot find module '"+B+"'");throw E.code="MODULE_NOT_FOUND",E}var F=q[B]={exports:{}};p[B][0].call(F.exports,function(G){var H=p[B][1][G];return w(H?H:G)},F,F.exports,m,p,q,v)}return q[B].exports}for(var z="function"==typeof require&&require,A=0;A<v.length;A++)w(v[A]);return w}({1:[function(m,p){"use strict";function v(B,C,D){this.fn=B,this.context=C,this.once=D||!1}function w(){}var z=Object.prototype.hasOwnProperty,A="function"!==typeof Object.create&&"~";w.prototype._events=void 0,w.prototype.eventNames=function(){var E,C=this._events,D=[];if(!C)return D;for(E in C)z.call(C,E)&&D.push(A?E.slice(1):E);return Object.getOwnPropertySymbols?D.concat(Object.getOwnPropertySymbols(C)):D},w.prototype.listeners=function(C,D){var E=A?A+C:C,F=this._events&&this._events[E];if(D)return!!F;if(!F)return[];if(F.fn)return[F.fn];for(var G=0,H=F.length,I=Array(H);G<H;G++)I[G]=F[G].fn;return I},w.prototype.emit=function(C,D,E,F,G,H){var I=A?A+C:C;if(!this._events||!this._events[I])return!1;var L,M,J=this._events[I],K=arguments.length;if("function"===typeof J.fn){switch(J.once&&this.removeListener(C,J.fn,void 0,!0),K){case 1:return J.fn.call(J.context),!0;case 2:return J.fn.call(J.context,D),!0;case 3:return J.fn.call(J.context,D,E),!0;case 4:return J.fn.call(J.context,D,E,F),!0;case 5:return J.fn.call(J.context,D,E,F,G),!0;case 6:return J.fn.call(J.context,D,E,F,G,H),!0;}for(M=1,L=Array(K-1);M<K;M++)L[M-1]=arguments[M];J.fn.apply(J.context,L)}else{var O,N=J.length;for(M=0;M<N;M++)switch(J[M].once&&this.removeListener(C,J[M].fn,void 0,!0),K){case 1:J[M].fn.call(J[M].context);break;case 2:J[M].fn.call(J[M].context,D);break;case 3:J[M].fn.call(J[M].context,D,E);break;default:if(!L)for(O=1,L=Array(K-1);O<K;O++)L[O-1]=arguments[O];J[M].fn.apply(J[M].context,L);}}return!0},w.prototype.on=function(C,D,E){var F=new v(D,E||this),G=A?A+C:C;return this._events||(this._events=A?{}:Object.create(null)),this._events[G]?this._events[G].fn?this._events[G]=[this._events[G],F]:this._events[G].push(F):this._events[G]=F,this},w.prototype.once=function(C,D,E){var F=new v(D,E||this,!0),G=A?A+C:C;return this._events||(this._events=A?{}:Object.create(null)),this._events[G]?this._events[G].fn?this._events[G]=[this._events[G],F]:this._events[G].push(F):this._events[G]=F,this},w.prototype.removeListener=function(C,D,E,F){var G=A?A+C:C;if(!this._events||!this._events[G])return this;var H=this._events[G],I=[];if(D)if(H.fn)(H.fn!==D||F&&!H.once||E&&H.context!==E)&&I.push(H);else for(var J=0,K=H.length;J<K;J++)(H[J].fn!==D||F&&!H[J].once||E&&H[J].context!==E)&&I.push(H[J]);return I.length?this._events[G]=1===I.length?I[0]:I:delete this._events[G],this},w.prototype.removeAllListeners=function(C){return this._events?(C?delete this._events[A?A+C:C]:this._events=A?{}:Object.create(null),this):this},w.prototype.off=w.prototype.removeListener,w.prototype.addListener=w.prototype.on,w.prototype.setMaxListeners=function(){return this},w.prefixed=A,"undefined"!==typeof p&&(p.exports=w)},{}],2:[function(m,p){function v(z){return z?void(this.iframe=z,this.isIOS_()&&window.addEventListener("devicemotion",this.onDeviceMotion_.bind(this),!1)):void console.error("No iframe specified")}var w=m("../message");v.prototype.send=function(z){var A=this.iframe.contentWindow;A.postMessage(z,"*")},v.prototype.onDeviceMotion_=function(z){var A={type:w.DEVICE_MOTION,deviceMotionEvent:this.cloneDeviceMotionEvent_(z)};this.send(A)},v.prototype.cloneDeviceMotionEvent_=function(z){return{acceleration:{x:z.acceleration.x,y:z.acceleration.y,z:z.acceleration.z},accelerationIncludingGravity:{x:z.accelerationIncludingGravity.x,y:z.accelerationIncludingGravity.y,z:z.accelerationIncludingGravity.z},rotationRate:{alpha:z.rotationRate.alpha,beta:z.rotationRate.beta,gamma:z.rotationRate.gamma},interval:z.interval,timeStamp:z.timeStamp}},v.prototype.isIOS_=function(){return /iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},p.exports=v},{"../message":5}],3:[function(m,p){var v=m("./player");p.exports={Player:v}},{"./player":4}],4:[function(m,p){function v(E,F){var G=this.createIframe_(F);this.iframe=G;E.appendChild(G),this.sender=new z(G),window.addEventListener("message",this.onMessage_.bind(this),!1),this.isPaused=!1,this.isMuted=!1,"undefined"!==typeof F.muted&&(this.isMuted=F.muted),this.currentTime=0,this.duration=0,this.volume=F.volume==void 0?1:F.volume,B.isIOS()&&this.injectFullscreenStylesheet_()}var w=m("eventemitter3"),z=m("./iframe-message-sender"),A=m("../message"),B=m("../util"),C=B.getCurrentScript().src,D="vrview-fake-fullscreen";v.prototype=new w,v.prototype.addHotspot=function(E,F){var G={pitch:F.pitch,yaw:F.yaw,radius:F.radius,distance:F.distance,id:E};this.sender.send({type:A.ADD_HOTSPOT,data:G})},v.prototype.play=function(){this.sender.send({type:A.PLAY})},v.prototype.pause=function(){this.sender.send({type:A.PAUSE})},v.prototype.setContent=function(E){this.absolutifyPaths_(E);this.sender.send({type:A.SET_CONTENT,data:{contentInfo:E}})},v.prototype.setVolume=function(E){this.sender.send({type:A.SET_VOLUME,data:{volumeLevel:E}})},v.prototype.getVolume=function(){return this.volume},v.prototype.mute=function(E){this.sender.send({type:A.MUTED,data:{muteState:E}})},v.prototype.setCurrentTime=function(E){this.sender.send({type:A.SET_CURRENT_TIME,data:{currentTime:E}})},v.prototype.getCurrentTime=function(){return this.currentTime},v.prototype.getDuration=function(){return this.duration},v.prototype.setFullscreen=function(){this.sender.send({type:A.SET_FULLSCREEN})},v.prototype.createIframe_=function(E){this.absolutifyPaths_(E);var F=document.createElement("iframe");F.setAttribute("allowfullscreen",!0),F.setAttribute("scrolling","no"),F.style.border=0,E.hasOwnProperty("width")&&(F.setAttribute("width",E.width),delete E.width),E.hasOwnProperty("height")&&(F.setAttribute("height",E.height),delete E.height);var G=this.getEmbedUrl_()+B.createGetParams(E);return F.src=G,F},v.prototype.onMessage_=function(E){var F=E.data;if(!F||!F.type)return void console.warn("Received message with no type.");var G=F.type.toLowerCase(),H=F.data;switch(G){case"ready":H!==void 0&&H.duration!==void 0&&(this.duration=H.duration);case"modechange":case"error":case"click":case"ended":case"getposition":this.emit(G,H);break;case"volumechange":this.volume=H,this.emit("volumechange",H);break;case"muted":this.isMuted=H,this.emit("mute",H);break;case"timeupdate":this.currentTime=H,this.emit("timeupdate",{currentTime:this.currentTime,duration:this.duration});break;case"play":case"paused":this.isPaused=H,this.isPaused?this.emit("pause",H):this.emit("play",H);break;case"enter-fullscreen":case"enter-vr":this.setFakeFullscreen_(!0);break;case"exit-fullscreen":this.setFakeFullscreen_(!1);break;default:console.warn("Got unknown message of type %s from %s",F.type,F.origin);}},v.prototype.setFakeFullscreen_=function(E){E?this.iframe.classList.add(D):this.iframe.classList.remove(D)},v.prototype.injectFullscreenStylesheet_=function(){var E=["iframe."+D,"{","position: fixed !important;","display: block !important;","z-index: 9999999999 !important;","top: 0 !important;","left: 0 !important;","width: 100% !important;","height: 100% !important;","margin: 0 !important;","}"].join("\n"),F=document.createElement("style");F.innerHTML=E,document.body.appendChild(F)},v.prototype.getEmbedUrl_=function(){var F=C.split("/"),G=F.slice(0,F.length-2),H=G.join("/");return H+"/index.html"},v.prototype.getDirName_=function(){var E=window.location.pathname;return E=E.substring(0,E.lastIndexOf("/")),location.protocol+"//"+location.host+E},v.prototype.absolutifyPaths_=function(E){for(var F=this.getDirName_(),G=["image","preview","video"],H=0;H<G.length;H++){var I=G[H],J=E[I];if(J&&B.isPathAbsolute(J)){var K=B.relativeToAbsolutePath(F,J);E[I]=K}}},v.prototype.getPosition=function(){this.sender.send({type:A.GET_POSITION,data:{}})},p.exports=v},{"../message":5,"../util":6,"./iframe-message-sender":2,eventemitter3:1}],5:[function(m,p){p.exports={PLAY:"play",PAUSE:"pause",TIMEUPDATE:"timeupdate",ADD_HOTSPOT:"addhotspot",SET_CONTENT:"setimage",SET_VOLUME:"setvolume",MUTED:"muted",SET_CURRENT_TIME:"setcurrenttime",DEVICE_MOTION:"devicemotion",GET_POSITION:"getposition",SET_FULLSCREEN:"setfullscreen"}},{}],6:[function(m,p){var v=window.Util||{};v.isDataURI=function(w){return w&&0==w.indexOf("data:")},v.generateUUID=function(){function w(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return w()+w()+"-"+w()+"-"+w()+"-"+w()+"-"+w()+w()+w()},v.isMobile=function(){var w=!1;return function(z){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(z)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(z.substr(0,4)))&&(w=!0)}(navigator.userAgent||navigator.vendor||window.opera),w},v.isIOS=function(){return /(iPad|iPhone|iPod)/g.test(navigator.userAgent)},v.isSafari=function(){return /^((?!chrome|android).)*safari/i.test(navigator.userAgent)},v.cloneObject=function(w){var z={};for(key in w)z[key]=w[key];return z},v.hashCode=function(w){return w.split("").reduce(function(z,A){return z=(z<<5)-z+A.charCodeAt(0),z&z},0)},v.loadTrackSrc=function(w,z,A,B){var C=new XMLHttpRequest;C.open("GET",z,!0),C.responseType="arraybuffer",C.onload=function(){w.decodeAudioData(C.response,function(D){A(D)},function(D){console.error(D)})},B&&(C.onprogress=function(D){var E=D.loaded/D.total;B(E)}),C.send()},v.isPow2=function(w){return 0==(w&w-1)},v.capitalize=function(w){return w.charAt(0).toUpperCase()+w.slice(1)},v.isIFrame=function(){try{return window.self!==window.top}catch(w){return!0}},v.getQueryParameter=function(w){w=w.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var z=new RegExp("[\\?&]"+w+"=([^&#]*)"),A=z.exec(location.search);return null===A?"":decodeURIComponent(A[1].replace(/\+/g," "))},v.isWebGLEnabled=function(){var w=document.createElement("canvas");try{gl=w.getContext("webgl")}catch(z){gl=null}if(null==gl)try{gl=w.getContext("experimental-webgl"),experimental=!0}catch(z){gl=null}return!!gl},v.clone=function(w){return JSON.parse(JSON.stringify(w))},v.hypot=Math.hypot||function(w,z){return Math.sqrt(w*w+z*z)},v.isIE11=function(){return navigator.userAgent.match(/Trident/)},v.getRectCenter=function(w){return new THREE.Vector2(w.x+w.width/2,w.y+w.height/2)},v.getScreenWidth=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},v.getScreenHeight=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},v.isIOS9OrLess=function(){if(!v.isIOS())return!1;var w=/(iPhone|iPad|iPod) OS ([\d_]+)/,z=navigator.userAgent.match(w);if(!z)return!1;var A=z[z.length-1],B=parseFloat(A);return 9>=B},v.getExtension=function(w){return w.split(".").pop().split("?")[0]},v.createGetParams=function(w){var z="?";for(var A in w){var B=A+"="+w[A]+"&";z+=B}return z.substring(0,w.length-2),z},v.sendParentMessage=function(w){window.parent&&parent.postMessage(w,"*")},v.parseBoolean=function(w){return"false"==w||0==w?!1:"true"==w||1==w||!!w},v.relativeToAbsolutePath=function(w,z){for(var A=w.split("/"),B=z.split("/"),C=0;C<B.length;C++)"."!=B[C]&&(".."==B[C]?A.pop():A.push(B[C]));return A.join("/")},v.isPathAbsolute=function(w){return!/^(?:\/|[a-z]+:\/\/)/.test(w)},v.isEmptyObject=function(w){return 0==Object.getOwnPropertyNames(w).length},v.isDebug=function(){return v.parseBoolean(v.getQueryParameter("debug"))},v.getCurrentScript=function(){return document.currentScript||console.warn("This browser does not support document.currentScript. Trying fallback."),document.currentScript||document.scripts[document.scripts.length-1]},p.exports=v},{}]},{},[3])(3)});
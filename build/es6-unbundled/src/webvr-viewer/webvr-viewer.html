<html><head><link rel="import" href="../../bower_components/polymer/polymer-element.html"><link rel="import" href="style.css"></head><body><dom-module id="webvr-viewer"><template><style>:host{display:block;}</style><div id="vrview"></div></template><script>(function(){const a=window.innerWidth,b=window.innerHeight;class c extends Polymer.Element{static get is(){return'webvr-viewer'}constructor(){super(),this.scene={petra:{image:'assets/gallery/petra.jpg',preview:'assets/gallery/petra-preview.jpg'}}}connectedCallback(){super.connectedCallback(),this.vrView=new VRView.Player(this.$.vrview,{width:a,height:b,image:this.rootPath+this.image,is_stereo:!1,is_autopan_off:!0}),this.vrView.on('ready',this._onVRViewReady.bind(this)),this.vrView.on('modechange',this._onModeChange.bind(this)),this.vrView.on('getposition',this._onGetPosition.bind(this)),this.vrView.on('error',this._onVRViewError.bind(this))}static get properties(){return{width:{type:Number,value:a,observer:'_widthChanged'},height:{type:Number,value:b,observer:'_heightChanged'},preview:{type:String},image:{type:String,observer:'_imageChanged'},isVRReady:{type:Boolean,value:!1}}}_loadScene(d){console.debug(c.is,'loadScene',d),this.vrView.setContent({image:this.rootPath+d,is_autopan_off:!0}),this.vrView.getPosition()}_onVRViewReady(){console.debug(c.is,'onVRViewReady'),this.set('isVRReady',!0),this._loadScene(this.image)}_onModeChange(d){console.debug(this.is,'onModeChange',d.mode)}_onVRViewError(d){console.debug(this.is,'Error! %s',d.message)}_onGetPosition(d){console.debug(c.is,'_onGetPosition',d)}_widthChanged(d){this.width=d}_heightChanged(d){this.height=d}_imageChanged(d){console.debug(c.is,'_imageChanged',d),this.image=d,this.isVRReady&&this._loadScene(this.image)}}window.customElements.define(c.is,c)})();</script><script src="lib/vrview.js"></script></dom-module></body></html>